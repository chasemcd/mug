---
phase: 71-documentation-migration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/participant-exclusion.md
  - docs/multiplayer-sync-optimization.md
  - docs/multiplayer_pyodide_implementation.md
  - docs/server-frame-aligned-stepper.md
  - docs/server-authoritative-architecture.md
  - docs/multiplayer-sync-optimization.html
autonomous: true

must_haves:
  truths:
    - "Zero references to .pyodide() as a GymScene method in any MD file under docs/"
    - "Zero references to .user_experience() in any MD file under docs/"
    - "Zero references to .continuous_monitoring() as a standalone GymScene method in any MD file"
    - "Zero references to .exclusion_callbacks() as a standalone GymScene method in any MD file"
    - "participant-exclusion.md correctly shows continuous monitoring and exclusion callback params as part of .multiplayer()"
  artifacts:
    - path: "docs/participant-exclusion.md"
      provides: "Participant exclusion docs with .multiplayer() consolidation"
      contains: ".multiplayer("
    - path: "docs/multiplayer-sync-optimization.md"
      provides: "Sync optimization docs using .multiplayer() for sync params"
      contains: ".multiplayer("
    - path: "docs/multiplayer_pyodide_implementation.md"
      provides: "Implementation docs using .runtime() and .multiplayer()"
      contains: ".runtime("
  key_links:
    - from: "docs/participant-exclusion.md"
      to: "interactive_gym/scenes/gym_scene.py"
      via: "method signature documentation matching actual API"
      pattern: "\\.multiplayer\\("
    - from: "docs/multiplayer-sync-optimization.md"
      to: "interactive_gym/scenes/gym_scene.py"
      via: "code examples using .multiplayer() for sync config"
      pattern: "\\.multiplayer\\("
---

<objective>
Migrate all Markdown design/internal documentation files to use new GymScene API method names, including structural rework of participant-exclusion.md.

Purpose: These design docs contain code examples and method signatures that reference removed methods (.pyodide(), .continuous_monitoring(), .exclusion_callbacks()). Developers consulting these docs will get incorrect API guidance. participant-exclusion.md in particular has entire sections structured around methods that no longer exist as standalone -- it needs its method signatures and parameter tables updated to reflect the .multiplayer() consolidation.

Output: 5 MD files updated. The stale Quarto HTML export deleted. All code examples and method references use the new API exclusively.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/71-documentation-migration/71-RESEARCH.md
@interactive_gym/scenes/gym_scene.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate participant-exclusion.md (structural rework)</name>
  <files>
    docs/participant-exclusion.md
  </files>
  <action>
This file needs the most work because its structure is built around old standalone methods (.continuous_monitoring(), .exclusion_callbacks()) that no longer exist. The changes go beyond find-replace.

Read the file first, then apply these changes:

1. **Method signature sections:** Where the doc shows `.continuous_monitoring(...)` as a standalone method signature with its own parameter table, update to show these as parameters on `.multiplayer()`. Keep the section about continuous monitoring as a concept, but make clear that configuration is via `.multiplayer()` params. For example, change "Method: `scene.continuous_monitoring(...)`" to "Configuration: pass these parameters to `scene.multiplayer(...)`".

2. **Parameter tables:** The parameters for continuous monitoring are now prefixed with `continuous_` on `.multiplayer()`:
   - `max_ping` -> `continuous_max_ping`
   - `ping_violation_window` -> `continuous_ping_violation_window`
   - `ping_required_violations` -> `continuous_ping_required_violations`
   - `tab_warning_ms` -> `continuous_tab_warning_ms`
   - `tab_exclude_ms` -> `continuous_tab_exclude_ms`
   - `exclusion_messages` -> `continuous_exclusion_messages`
   - `continuous_monitoring_enabled` is a new param (bool) to enable the feature

3. **Exclusion callbacks section:** `.exclusion_callbacks(continuous_callback=..., continuous_callback_interval_frames=...)` becomes params on `.multiplayer()`:
   - `continuous_callback` (same name)
   - `continuous_callback_interval_frames` (same name)

4. **Code examples (lines ~40, ~160, ~272, ~355-368):** All code examples showing `.continuous_monitoring(...)` or `.exclusion_callbacks(...)` chained calls become a single `.multiplayer(...)` call with the appropriate params. See 71-RESEARCH.md "Example 4" for the exact conversion pattern.

5. **Text references:** All prose mentioning "`.continuous_monitoring()`" or "`GymScene.continuous_monitoring()`" should say "`.multiplayer()`" with a note that continuous monitoring is configured via params like `continuous_monitoring_enabled=True, continuous_max_ping=200, ...`.

Keep the document's overall structure (sections about what continuous monitoring does, what exclusion callbacks do). Only change HOW it's configured (method names and param names). Do NOT delete conceptual explanations.
  </action>
  <verify>
Run: `grep -n '\.continuous_monitoring\(\|\.exclusion_callbacks(' docs/participant-exclusion.md` -- must return zero matches.
Run: `grep -n '\.multiplayer(' docs/participant-exclusion.md` -- should return multiple matches (confirming new API is used).
Manually check that param names in examples match the actual .multiplayer() signature (continuous_max_ping, not max_ping).
  </verify>
  <done>participant-exclusion.md has zero references to .continuous_monitoring() or .exclusion_callbacks() as standalone methods. All configuration examples use .multiplayer() with correct parameter names. Conceptual content preserved.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate 4 design MD files + delete stale HTML</name>
  <files>
    docs/multiplayer-sync-optimization.md
    docs/multiplayer_pyodide_implementation.md
    docs/server-frame-aligned-stepper.md
    docs/server-authoritative-architecture.md
    docs/multiplayer-sync-optimization.html
  </files>
  <action>
Apply method name migrations to these 4 MD files. These are design/implementation docs with code examples that reference old API.

Key rules (same as Plan 01):
1. `.pyodide(...)` with only browser exec params -> `.runtime(...)` (same params)
2. `.pyodide(...)` with multiplayer/sync params -> split to `.runtime(...)` + `.multiplayer(...)`
3. `.user_experience(...)` with content params -> `.content(...)` (same params)
4. `.user_experience(...)` with waitroom params -> split to `.content(...)` + `.waitroom(...)` (shortened param names)
5. Update text references, not just code blocks

File-specific notes from research:

**multiplayer-sync-optimization.md:**
- Lines ~110-114: `.pyodide(state_sync_frequency_frames=20, ...)` -> split into `.multiplayer(state_broadcast_interval=20)` + `.runtime(...)` for any browser exec params. Note the param rename: `state_sync_frequency_frames` -> `state_broadcast_interval`.
- Lines ~473-475: Same pattern, `.pyodide(state_sync_frequency_frames=60, ...)` -> `.multiplayer(state_broadcast_interval=60)`.

**multiplayer_pyodide_implementation.md:**
- Line ~808: Text reference `.pyodide()` -> `.multiplayer()` for the multiplayer param.
- Lines ~820-834: Code showing old `def pyodide(...)` method signature -> show the new split: `.runtime()` for browser exec + `.multiplayer()` for sync. Since this shows internal method code, update to reflect the current method names.
- Lines ~1202-1217: `.pyodide(run_through_pyodide=True, multiplayer=True, ...)` -> `.runtime(run_through_pyodide=True, ...).multiplayer(multiplayer=True)`.
- Lines ~1237-1241: `.user_experience(...)` -> `.content(...)` + `.waitroom(timeout=60000)` if waitroom params present.
- Lines ~1252-1256: `.pyodide(run_through_pyodide=True, multiplayer=True, ...)` -> `.runtime(...).multiplayer(multiplayer=True)`.

**server-frame-aligned-stepper.md:**
- Lines ~595-614: Code showing `pyodide()` method -> update to show `.runtime()` + `.multiplayer()` split.
- Lines ~700-708: `.pyodide(run_through_pyodide=True, multiplayer=True, server_authoritative=True, ...)` -> `.runtime(run_through_pyodide=True, ...).multiplayer(multiplayer=True, server_authoritative=True, ...)`.
- Line ~780: Checklist item about "pyodide() method" -> reference new method names.

**server-authoritative-architecture.md:**
- Lines ~666-677: `.pyodide(run_through_pyodide=True, multiplayer=True, server_authoritative=True, ...)` -> `.runtime(...).multiplayer(...)`.
- Line ~708: Checklist item about `GymScene.pyodide()` -> reference `.multiplayer()`.

**Stale HTML file:**
Delete `docs/multiplayer-sync-optimization.html`. This is a Quarto-generated export of the MD source. It is tracked by git but will be stale after the MD is updated. The MD source is the canonical version.

Do NOT change parameter values or non-GymScene content. Do NOT edit files in docs/_build/.
  </action>
  <verify>
Run: `grep -rn '\.pyodide\(\|\.user_experience(' docs/multiplayer-sync-optimization.md docs/multiplayer_pyodide_implementation.md docs/server-frame-aligned-stepper.md docs/server-authoritative-architecture.md` -- must return zero matches.

Run: `grep -rn 'pyodide()' docs/multiplayer-sync-optimization.md docs/multiplayer_pyodide_implementation.md docs/server-frame-aligned-stepper.md docs/server-authoritative-architecture.md` -- must return zero matches for GymScene .pyodide() method references (the word "pyodide" as a technology/package name is fine).

Verify HTML deleted: `test ! -f docs/multiplayer-sync-optimization.html && echo "DELETED" || echo "STILL EXISTS"` -- must print DELETED.
  </verify>
  <done>All 4 MD design docs contain zero references to removed GymScene method names. Code examples use .runtime(), .multiplayer(), .content() as appropriate. Stale HTML export deleted.</done>
</task>

</tasks>

<verification>
After both tasks, run a comprehensive sweep across ALL MD files in docs/:
1. `grep -rn '\.pyodide(' docs/ --include='*.md'` -- zero matches
2. `grep -rn '\.user_experience(' docs/ --include='*.md'` -- zero matches
3. `grep -rn '\.continuous_monitoring(' docs/ --include='*.md'` -- zero matches
4. `grep -rn '\.exclusion_callbacks(' docs/ --include='*.md'` -- zero matches
5. `grep -rn 'pyodide()' docs/ --include='*.md'` -- zero matches for GymScene method references
6. `test ! -f docs/multiplayer-sync-optimization.html` -- HTML file deleted
</verification>

<success_criteria>
- Zero references to .pyodide() as a GymScene method in any MD file under docs/
- Zero references to .user_experience(), .continuous_monitoring(), .exclusion_callbacks() in any MD file
- participant-exclusion.md restructured to show continuous monitoring and exclusion callbacks as .multiplayer() params
- All code examples use correct new API methods with correct param names
- Stale Quarto HTML export deleted
</success_criteria>

<output>
After completion, create `.planning/phases/71-documentation-migration/71-02-SUMMARY.md`
</output>
