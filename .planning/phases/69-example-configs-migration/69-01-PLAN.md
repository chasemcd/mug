---
phase: 69-example-configs-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - interactive_gym/examples/cogrid/scenes/scenes.py
autonomous: true

must_haves:
  truths:
    - "All GymScene configs in scenes.py use content() instead of user_experience() for display params"
    - "All GymScene configs in scenes.py use runtime() instead of pyodide() for browser execution params"
    - "All GymScene configs in scenes.py use multiplayer() instead of partner_disconnect_message_config() for disconnect params"
    - "All GymScene configs in scenes.py use assets() for assets_to_preload instead of passing it to rendering()"
    - "Waitroom params in user_experience() are moved to waitroom() with shortened names"
    - "scenes.py can be imported without errors"
  artifacts:
    - path: "interactive_gym/examples/cogrid/scenes/scenes.py"
      provides: "All cogrid scene configurations using new API"
      contains: "content("
  key_links:
    - from: "interactive_gym/examples/cogrid/scenes/scenes.py"
      to: "interactive_gym/scenes/gym_scene.py"
      via: "builder method calls"
      pattern: "\\.(content|runtime|multiplayer|waitroom|assets)\\("
---

<objective>
Migrate interactive_gym/examples/cogrid/scenes/scenes.py from old GymScene API methods to new ones.

Purpose: This is the largest example file with ~20+ builder method calls across many scene configs. After Phase 68 removed old methods, this file will error on import until migrated.
Output: scenes.py using exclusively new API methods (content, runtime, multiplayer, waitroom, assets).
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@interactive_gym/scenes/gym_scene.py
@interactive_gym/examples/cogrid/scenes/scenes.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate all builder method calls in scenes.py to new API</name>
  <files>interactive_gym/examples/cogrid/scenes/scenes.py</files>
  <action>
Apply these exact transformations throughout the file:

1. **`.pyodide()` -> `.runtime()` for browser execution params only:**
   - `run_through_pyodide` stays as-is (same param name in runtime())
   - `environment_initialization_code_filepath` stays as-is
   - `packages_to_install` stays as-is
   - IMPORTANT: If `.pyodide()` also contains multiplayer sync params (`multiplayer=True`, `state_broadcast_interval`, `server_authoritative`, `input_delay`), those must be SPLIT OUT into a separate `.multiplayer()` call. See the `cramped_room_human_human` scene specifically.

2. **`.user_experience()` -> `.content()` for display params + `.waitroom()` for waitroom params:**
   - `scene_header`, `scene_body`, `scene_body_filepath`, `in_game_scene_body`, `game_page_html_fn` -> go to `.content()`
   - `waitroom_timeout` -> `.waitroom(timeout=...)` (note: param name shortens, drop "waitroom_" prefix)
   - `waitroom_timeout_message` -> `.waitroom(timeout_message=...)` (note: param name shortens)
   - If a `.user_experience()` call has BOTH content and waitroom params, split into two calls: `.content(...)` and `.waitroom(...)`
   - If a `.user_experience()` call has ONLY content params (no waitroom_ params), just rename to `.content()`

3. **`.rendering(assets_to_preload=...)` -> move `assets_to_preload` to `.assets()`:**
   - Remove `assets_to_preload` from `.rendering()` calls
   - Add `.assets(assets_to_preload=...)` call after the `.rendering()` call
   - Other rendering params (fps, env_to_state_fn, hud_text_fn, game_width, game_height, background) stay in `.rendering()`

4. **`.partner_disconnect_message_config(message=..., show_completion_code=...)` -> `.multiplayer(partner_disconnect_message=..., partner_disconnect_show_completion_code=...)`:**
   - `message` becomes `partner_disconnect_message`
   - `show_completion_code` becomes `partner_disconnect_show_completion_code`

5. **`.matchmaking()` stays as-is** -- matchmaking() was NOT removed in Phase 68, it remains a valid method.

6. **Deep-copied scenes that chain `.pyodide()` or `.user_experience()`:**
   - These partial-override calls follow the same rules. E.g., `copy.deepcopy(cramped_room_sp_0).pyodide(environment_initialization_code_filepath=...)` becomes `.runtime(environment_initialization_code_filepath=...)`
   - `copy.deepcopy(...).user_experience(scene_header=..., scene_body=...)` becomes `.content(scene_header=..., scene_body=...)`

Specific scenes to migrate (in file order):
- `tutorial_gym_scene`: has .rendering(assets_to_preload=...), .user_experience(...), .pyodide(...)
- `cramped_room_sp_0`: has .rendering(assets_to_preload=...), .user_experience(...), .pyodide(...)
- `cramped_room_ibc_0`: deepcopy, chains .user_experience(...)
- `counter_circuit_sp_0`: deepcopy, chains .pyodide(...), .user_experience(...), .rendering(...)
- `counter_circuit_ibc_0`: deepcopy, chains .user_experience(...)
- `forced_coordination_sp_0`: deepcopy, chains .pyodide(...), .user_experience(...), .rendering(...)
- `forced_coordination_ibc_0`: deepcopy, chains .user_experience(...)
- `asymmetric_advantages_sp_0`: deepcopy, chains .pyodide(...), .user_experience(...), .rendering(...)
- `asymmetric_advantages_ibc_0`: deepcopy, chains .user_experience(...)
- `coordination_ring_sp_0`: deepcopy, chains .pyodide(...), .user_experience(...), .rendering(...)
- `coordination_ring_ibc_0`: deepcopy, chains .user_experience(...)
- `cramped_room_human_human`: has .rendering(assets_to_preload=...), .user_experience(..., waitroom_timeout=300000, waitroom_timeout_message=...), .matchmaking(...), .pyodide(run_through_pyodide=True, multiplayer=True, ..., state_broadcast_interval=15, server_authoritative=False, input_delay=3), .partner_disconnect_message_config(...)
- `counter_circuit_human_human`: deepcopy, chains .pyodide(...), .user_experience(...)
- `forced_coordination_human_human`: deepcopy, chains .pyodide(...), .user_experience(...)
- `asymmetric_advantages_human_human`: deepcopy, chains .pyodide(...), .user_experience(...)
- `coordination_ring_human_human`: deepcopy, chains .pyodide(...), .user_experience(...)

The `cramped_room_human_human` scene is the most complex migration because its `.pyodide()` call has BOTH runtime params AND multiplayer sync params that must be split:
```python
# OLD:
.pyodide(
    run_through_pyodide=True,
    multiplayer=True,
    environment_initialization_code_filepath="...",
    packages_to_install=[...],
    state_broadcast_interval=15,
    server_authoritative=False,
    input_delay=3,
)
.partner_disconnect_message_config(message="...", show_completion_code=True)

# NEW:
.runtime(
    run_through_pyodide=True,
    environment_initialization_code_filepath="...",
    packages_to_install=[...],
)
.multiplayer(
    multiplayer=True,
    state_broadcast_interval=15,
    server_authoritative=False,
    input_delay=3,
    partner_disconnect_message="...",
    partner_disconnect_show_completion_code=True,
)
```

Also its `.user_experience()` has BOTH content AND waitroom params that must split:
```python
# OLD:
.user_experience(
    scene_header="Overcooked - Multiplayer",
    scene_body="...",
    game_page_html_fn=...,
    in_game_scene_body="...",
    waitroom_timeout=300000,
    waitroom_timeout_message="...",
)

# NEW:
.content(
    scene_header="Overcooked - Multiplayer",
    scene_body="...",
    game_page_html_fn=...,
    in_game_scene_body="...",
)
.waitroom(
    timeout=300000,
    timeout_message="...",
)
```

The deep-copied human-human variants (counter_circuit_human_human, etc.) override `.pyodide()` with only `environment_initialization_code_filepath` and `.user_experience()` with only `scene_body` -- these are simple renames to `.runtime()` and `.content()` respectively.
  </action>
  <verify>
Run: `python -c "from interactive_gym.examples.cogrid.scenes import scenes; print('OK')"` -- should print OK without errors.
Run: `grep -n '\.pyodide\b\|\.user_experience\b\|\.partner_disconnect_message_config\b\|\.focus_loss_config\b\|\.player_grouping\b\|\.continuous_monitoring\b\|\.exclusion_callbacks\b\|\.reconnection_config\b\|\.player_pairing\b' interactive_gym/examples/cogrid/scenes/scenes.py` -- should return no matches.
  </verify>
  <done>All GymScene configs in scenes.py exclusively use new method names (content, runtime, multiplayer, waitroom, assets). No references to old method names remain. File imports without error.</done>
</task>

</tasks>

<verification>
1. `python -c "from interactive_gym.examples.cogrid.scenes import scenes"` exits 0
2. `grep -rn 'pyodide\|user_experience\|partner_disconnect_message_config\|focus_loss_config' interactive_gym/examples/cogrid/scenes/scenes.py` returns nothing (note: grep for the method call pattern `.pyodide(` etc, not the string "pyodide" inside param values like `run_through_pyodide`)
3. `grep -c '\.content(' interactive_gym/examples/cogrid/scenes/scenes.py` returns a count > 0
4. `grep -c '\.runtime(' interactive_gym/examples/cogrid/scenes/scenes.py` returns a count > 0
</verification>

<success_criteria>
- scenes.py imports cleanly (no AttributeError on old methods)
- Zero calls to old method names (.pyodide, .user_experience, .partner_disconnect_message_config)
- assets_to_preload moved from .rendering() to .assets()
- Waitroom params use .waitroom() with shortened names (timeout, not waitroom_timeout)
- cramped_room_human_human has separate .runtime() and .multiplayer() calls
</success_criteria>

<output>
After completion, create `.planning/phases/69-example-configs-migration/69-01-SUMMARY.md`
</output>
