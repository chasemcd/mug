---
phase: 72-server-python-dead-code-removal
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - interactive_gym/configurations/render_configs.py (DELETE)
  - interactive_gym/utils/onnx_inference_utils.py (DELETE)
  - interactive_gym/utils/inference_utils.py (DELETE)
  - interactive_gym/server/remote_game.py
  - interactive_gym/configurations/object_contexts.py
  - interactive_gym/server/callback.py
  - interactive_gym/examples/slime_volleyball/slime_volleyball_utils.py
  - interactive_gym/examples/cogrid/overcooked_utils.py
autonomous: true

must_haves:
  truths:
    - "No dead Python files remain in configurations/ or utils/"
    - "The legacy RemoteGame class no longer exists in remote_game.py"
    - "All type annotations reference RemoteGameV2 instead of RemoteGame"
    - "The unused RenderedEnvRGB class no longer exists in object_contexts.py"
    - "All unit tests pass after removals"
  artifacts:
    - path: "interactive_gym/configurations/render_configs.py"
      state: "deleted"
    - path: "interactive_gym/utils/onnx_inference_utils.py"
      state: "deleted"
    - path: "interactive_gym/utils/inference_utils.py"
      state: "deleted"
    - path: "interactive_gym/server/remote_game.py"
      provides: "RemoteGameV2 only (RemoteGame class removed)"
      contains: "class RemoteGameV2"
    - path: "interactive_gym/server/callback.py"
      provides: "GameCallback and MultiCallback with RemoteGameV2 annotations"
    - path: "interactive_gym/configurations/object_contexts.py"
      provides: "Sprite, Line, Circle etc. (RenderedEnvRGB removed)"
  key_links:
    - from: "interactive_gym/server/callback.py"
      to: "interactive_gym/server/remote_game.py"
      via: "type annotation remote_game.RemoteGameV2"
      pattern: "remote_game\\.RemoteGameV2"
    - from: "interactive_gym/examples/slime_volleyball/slime_volleyball_utils.py"
      to: "interactive_gym/server/remote_game.py"
      via: "type annotation remote_game.RemoteGameV2"
      pattern: "remote_game\\.RemoteGameV2"
    - from: "interactive_gym/examples/cogrid/overcooked_utils.py"
      to: "interactive_gym/server/remote_game.py"
      via: "type annotation remote_game.RemoteGameV2"
      pattern: "remote_game\\.RemoteGameV2"
---

<objective>
Remove all dead files, dead classes, and update cascading type annotations in server Python code.

Purpose: Eliminate 3 entirely unused files, the legacy RemoteGame class, and the unused RenderedEnvRGB class. Update all type annotations that referenced the dead RemoteGame class to point to RemoteGameV2.

Output: Cleaner codebase with only live code remaining in the affected files. Zero functionality change.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/72-server-python-dead-code-removal/72-RESEARCH.md

Key reference files:
@interactive_gym/server/remote_game.py
@interactive_gym/server/callback.py
@interactive_gym/configurations/object_contexts.py
@interactive_gym/configurations/render_configs.py
@interactive_gym/utils/onnx_inference_utils.py
@interactive_gym/utils/inference_utils.py
@interactive_gym/examples/slime_volleyball/slime_volleyball_utils.py
@interactive_gym/examples/cogrid/overcooked_utils.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete dead files and remove dead classes</name>
  <files>
    interactive_gym/configurations/render_configs.py (DELETE)
    interactive_gym/utils/onnx_inference_utils.py (DELETE)
    interactive_gym/utils/inference_utils.py (DELETE)
    interactive_gym/server/remote_game.py
    interactive_gym/configurations/object_contexts.py
  </files>
  <action>
    1. DELETE these 3 files entirely (they have zero imports anywhere in the codebase):
       - `interactive_gym/configurations/render_configs.py` (contains only unused `Animation` dataclass)
       - `interactive_gym/utils/onnx_inference_utils.py` (ONNX inference functions, never imported)
       - `interactive_gym/utils/inference_utils.py` (only imported by the dead onnx_inference_utils.py)

    2. In `interactive_gym/server/remote_game.py`:
       - Remove the entire `RemoteGame` class (starts around line 452, runs to end of file ~line 788).
       - Keep everything above it: imports, `GameStatus`, `SessionState`, and `RemoteGameV2` class.
       - Do NOT remove any imports that are used by RemoteGameV2. The dead class uses some of the same imports as RemoteGameV2, so verify each import is still needed after removal.
       - After removal, clean up any imports that were ONLY used by the dead RemoteGame class (e.g., `RemoteConfig` import if only used there).

    3. In `interactive_gym/configurations/object_contexts.py`:
       - Remove the `RenderedEnvRGB` class (around line 354). It is never referenced anywhere.
       - Keep all other classes (Sprite, Line, Circle, Rectangle, Text, etc.).

    CAUTION: When removing RemoteGame class, remove ALL its methods together. Do not leave orphan methods. The class is self-contained -- it has internal method calls that would become dangling if partially removed.
  </action>
  <verify>
    - `ls interactive_gym/configurations/render_configs.py` returns "No such file"
    - `ls interactive_gym/utils/onnx_inference_utils.py` returns "No such file"
    - `ls interactive_gym/utils/inference_utils.py` returns "No such file"
    - `grep -n "class RemoteGame:" interactive_gym/server/remote_game.py` returns NO matches (only RemoteGameV2 should exist)
    - `grep -n "class RemoteGameV2" interactive_gym/server/remote_game.py` returns a match (confirming it's preserved)
    - `grep -n "RenderedEnvRGB" interactive_gym/configurations/object_contexts.py` returns NO matches
    - `python -c "from interactive_gym.server.remote_game import RemoteGameV2"` succeeds
    - `python -c "from interactive_gym.configurations.object_contexts import Sprite"` succeeds
  </verify>
  <done>
    3 dead files deleted. RemoteGame class removed from remote_game.py (only RemoteGameV2 remains). RenderedEnvRGB removed from object_contexts.py. All remaining code imports successfully.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update type annotations from RemoteGame to RemoteGameV2</name>
  <files>
    interactive_gym/server/callback.py
    interactive_gym/examples/slime_volleyball/slime_volleyball_utils.py
    interactive_gym/examples/cogrid/overcooked_utils.py
  </files>
  <action>
    1. In `interactive_gym/server/callback.py`:
       - Replace ALL type annotations `remote_game.RemoteGame` with `remote_game.RemoteGameV2` (approximately 22 occurrences across GameCallback and MultiCallback methods on lines 10-90).
       - Do NOT change any method names, bodies, or behavior. Only the type annotation changes.

    2. In `interactive_gym/examples/slime_volleyball/slime_volleyball_utils.py`:
       - Line 16: Change `game: remote_game.RemoteGame` to `game: remote_game.RemoteGameV2`
       - Line 58: Change `game: remote_game.RemoteGame` to `game: remote_game.RemoteGameV2`

    3. In `interactive_gym/examples/cogrid/overcooked_utils.py`:
       - Line 24: Change `game: remote_game.RemoteGame` to `game: remote_game.RemoteGameV2`
       - Line 59: Change `game: remote_game.RemoteGame` to `game: remote_game.RemoteGameV2`

    4. After all changes, do a final sweep: `grep -r "RemoteGame[^V]" interactive_gym/ --include="*.py"` to confirm zero remaining references to the old class name (except possibly in comments -- comments referencing the old name in game_manager.py line 187 are acceptable and will be handled by Plan 02 which owns that file).

    Run `pytest tests/unit/ -v` to confirm all 27 tests still pass.
  </action>
  <verify>
    - `grep -rn "RemoteGame[^V]" interactive_gym/server/callback.py` returns NO matches
    - `grep -rn "RemoteGame[^V]" interactive_gym/examples/ --include="*.py"` returns NO matches
    - `grep -rn "RemoteGameV2" interactive_gym/server/callback.py` returns ~22 matches
    - `pytest tests/unit/ -v` passes (27/27 tests)
  </verify>
  <done>
    All type annotations updated from RemoteGame to RemoteGameV2 across callback.py and example utils. All unit tests pass. No remaining references to the dead class outside of comments.
  </done>
</task>

</tasks>

<verification>
- All 3 dead files are deleted from disk
- `class RemoteGame:` (not V2) no longer exists anywhere in the codebase
- `RenderedEnvRGB` no longer exists anywhere in the codebase
- All type annotations reference `RemoteGameV2`
- `pytest tests/unit/ -v` passes with 27/27 tests
- `python -c "from interactive_gym.server import remote_game; from interactive_gym.server import callback"` succeeds
</verification>

<success_criteria>
- Zero dead files remain (render_configs.py, onnx_inference_utils.py, inference_utils.py all deleted)
- Zero dead classes remain (RemoteGame and RenderedEnvRGB both removed)
- All type annotations updated to RemoteGameV2
- All 27 unit tests pass
- No import errors in affected modules
</success_criteria>

<output>
After completion, create `.planning/phases/72-server-python-dead-code-removal/72-01-SUMMARY.md`
</output>
